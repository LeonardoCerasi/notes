% page layout
\usepackage[left=15mm, right=15mm, top=25mm]{geometry}
\geometry{a4paper}

% images
\usepackage{graphicx}

% headers and foooters
\usepackage{fancyhdr}
\setlength{\headheight}{15pt}

% part name
\let\Oldpart\part
\newcommand{\parttitle}{}
\renewcommand{\part}[1]{\Oldpart{#1}\renewcommand{\parttitle}{#1}}

% no random page numbers
\fancypagestyle{plain}{%
  \fancyhf{}                          % clear all header and footer fields
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}
}

% custom headers and footers
\renewcommand{\chaptermark}[1]{\markboth{#1}{#1}}
\pagestyle{fancy}
\fancyhead{}
\fancyfoot{}

\fancypagestyle{body}{%
  \fancyhead[LE,RO]{\thepage}%
  \fancyhead[LO]{\chaptername\ \thechapter:\ \leftmark}%
  \fancyhead[RE]{\partname\ \thepart:\ \parttitle}%
}

% special header for Introduzione
\fancypagestyle{introd}{%
  \fancyhead[LE,RO]{\thepage}%
  \fancyhead[RE,LO]{\leftmark}%
}

% special header for Indice
\fancypagestyle{indice}{%
  \fancyhead[LE,RO]{\thepage}%
  \fancyhead[RE,LO]{Indice}%
}

% special header for Contents
\fancypagestyle{contents}{%
  \fancyhead[LE,RO]{\thepage}%
  \fancyhead[RE,LO]{Contents}%
}

% no blank pages
\let\cleardoublepage\clearpage
% removes indentation
\setlength{\parindent}{0pt}
% add subsubsection numbering
\setcounter{secnumdepth}{3}

% math
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{mathtools}
\usepackage{mathrsfs}
\usepackage{tensor}

% physics
\usepackage{braket}

% chemistry
\usepackage{chemformula}

% custom environments
%\newtheoremstyle{theorem}{}{}{\slshape}{}{\bfseries}{.}{ }{}

%\theoremstyle{definition}
%\newtheorem{definition}{Definition}[section]

%\theoremstyle{theorem}
%\newtheorem{theorem}{Theorem}[section]

%\theoremstyle{theorem}
%\newtheorem{corollary}{Corollary}[theorem]

%\theoremstyle{theorem}
%\newtheorem{lemma}{Lemma}[section]

%\theoremstyle{theorem}
%\newtheorem{lemcorollary}{Corollary}[lemma]

%\theoremstyle{theorem}
%\newtheorem{proposition}{Proposition}[section]

%\theoremstyle{theorem}
%\newtheorem{propcorollary}{Corollary}[proposition]

%\theoremstyle{remark}
%\newtheorem{example}{Example}[section]

% fancy environments
\usepackage[many]{tcolorbox}
\tcbuselibrary{theorems}

\NewTcbTheorem[number within=section]{definition}{Definition}%
{enhanced, breakable, colback=green!5, colframe=green!35!black, fonttitle=\bfseries}{def}

\newtcbtheorem[number within=section]{theorem}{Theorem}%
{enhanced, breakable, colback=red!5, colframe=red!35!black, fonttitle=\bfseries}{th}

\newtcbtheorem[number within=tcb@cnt@theorem]{corollary}{Corollary}%
{enhanced, breakable, colback=red!5, colframe=red!35!black, fonttitle=\bfseries}{cor}

\newtcbtheorem[number within=section]{lemma}{Lemma}%
{enhanced, breakable, colback=blue!5, colframe=blue!35!black, fonttitle=\bfseries}{lemma}

\newtcbtheorem[number within=lemma]{lemcorollary}{Corollary}%
{enhanced, breakable, colback=blue!5, colframe=blue!35!black, fonttitle=\bfseries}{cor}

\newtcbtheorem[number within=section]{proposition}{Proposition}%
{enhanced, breakable, colback=cyan!5, colframe=cyan!35!black, fonttitle=\bfseries}{prop}

\newtcbtheorem[number within=proposition]{propcorollary}{Corollary}%
{enhanced, breakable, colback=cyan!5, colframe=cyan!35!black, fonttitle=\bfseries}{cor}

\newtcbtheorem[number within=section]{example}{Example}%
{enhanced, breakable, colback=yellow!5, colframe=yellow!35!black,fonttitle=\bfseries}{ex}

% sectioning
\usepackage{titlesec}

% hyper-references
\usepackage{hyperref}

% extended integral symbols
\usepackage{esint}

% add table of contents, index and bibliography to table of contents
\usepackage{tocbibind}

% text
\newcommand{\virgolette}[1]{``\text{#1}"}
\newcommand{\tildetext}{\raise.17ex\hbox{$\scriptstyle\mathtt{\sim}$}}

% greek
\newcommand{\Chi}{\text{X}}

% custom math symbols
\newcommand{\abs}[1]{\left\lvert#1\right\rvert}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\sgn}[1]{\mathrm{sgn}\,#1}
\newcommand{\pa}{\partial}
\newcommand{\na}{\nabla}
\newcommand{\tens}[1]{\mathrm{#1}}
\newcommand{\defeq}{\mathrel{\vcenter{\baselineskip0.5ex \lineskiplimit0pt
                     \hbox{\scriptsize.}\hbox{\scriptsize.}}}%
                     =}
\newcommand{\eqdef}{=%
                     \mathrel{\vcenter{\baselineskip0.5ex \lineskiplimit0pt
                     \hbox{\scriptsize.}\hbox{\scriptsize.}}}}
\newcommand{\ve}[1]{\mathbf{#1}}
\newcommand{\lap}{\triangle}
\newcommand{\hilb}{\mathscr{H}}
\DeclareMathOperator{\diag}{diag}
\newcommand{\sqg}{\sqrt{\tens{g}}}
\newcommand{\sqgm}{\sqrt{-\tens{g}}}
\newcommand{\cm}{\mathcal{C}^{\infty}(\mathcal{M})}
\DeclareMathOperator{\lspan}{span}
\newcommand{\xm}{\mathfrak{X}(\mathcal{M})}
\DeclareMathOperator{\id}{id}
\newcommand{\ld}{\mathcal{L}}
\newcommand{\lm}[1]{\Lambda^{#1}(\mathcal{M})}
\newcommand{\hrm}[1]{\mathrm{Harm}^{#1}(\mathcal{M})}
\DeclareMathOperator{\ran}{ran}
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\im}{Im}
\newcommand{\dd}{\mathrm{d}}
\newcommand{\bs}[1]{\boldsymbol{#1}}
\newcommand{\dg}{^\dagger}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\Ad}{Ad}
\newcommand{\lag}{\mathcal{L}}

% small \overleftrightarrow
\makeatletter
\newcommand{\overleftrightsmallarrow}{\mathpalette{\overarrowsmall@\leftrightarrowfill@}}
\newcommand{\overrightsmallarrow}{\mathpalette{\overarrowsmall@\rightarrowfill@}}
\newcommand{\overleftsmallarrow}{\mathpalette{\overarrowsmall@\leftarrowfill@}}
\newcommand{\overarrowsmall@}[3]{%
  \vbox{%
    \ialign{%
      ##\crcr
      #1{\smaller@style{#2}}\crcr
      \noalign{\nointerlineskip}%
      $\m@th\hfil#2#3\hfil$\crcr
    }%
  }%
}
\def\smaller@style#1{%
  \ifx#1\displaystyle\scriptstyle\else
    \ifx#1\textstyle\scriptstyle\else
      \scriptscriptstyle
    \fi
  \fi
}
\makeatother
\newcommand{\smlra}[1]{\overleftrightsmallarrow{#1}}

% functions
\DeclareMathOperator{\sech}{sech}
\DeclareMathOperator{\Exp}{Exp}

% number sets
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\K}{\mathbb{K}}

% groups
\newcommand{\Ot}{\mathrm{O}(3)}
\newcommand{\SOt}{\mathrm{SO}(3)}
\newcommand{\On}[1]{\mathrm{O}(#1)}
\newcommand{\SOn}[1]{\mathrm{SO}(#1)}
\newcommand{\Un}[1]{\mathrm{U}(#1)}
\newcommand{\SUn}[1]{\mathrm{SU}(#1)}
\newcommand{\GL}[1]{\mathrm{GL}(#1)}
\newcommand{\SL}[1]{\mathrm{SL}(#1)}

% units of measure
\newcommand{\m}{\,\mathrm{m}}
\newcommand{\ang}{\,\mathrm{\AA}}
\newcommand{\fm}{\,\mathrm{fm}}

\newcommand{\barn}{\,\mathrm{barn}}

\newcommand{\cels}{\,^{\circ}\mathrm{C}}

\newcommand{\ev}{\,\mathrm{eV}}
\newcommand{\kev}{\,\mathrm{keV}}
\newcommand{\mev}{\,\mathrm{MeV}}
\newcommand{\gev}{\,\mathrm{GeV}}
\newcommand{\tev}{\,\mathrm{TeV}}

% particles
\newcommand{\g}{\mathrm{g}}
\newcommand{\w}{\mathrm{W}}
\newcommand{\z}{\mathrm{Z}}

% custom chapter heading
\titleformat{\chapter}[display]
{\normalfont\bfseries}
{\large\chaptertitlename \, \thechapter}
{1ex}
{\titlerule[1pt]
\vspace{2ex}%
\Huge}

% frontmatters defaults
\author{Leonardo Cerasi%
	\thanks{\scriptsize\href{mailto:leonardo.cerasi@studenti.unimi.it}{leo.cerasi@pm.me}}\\
	\small GitHub repository: \href{https://github.com/LeonardoCerasi/notes}{LeonardoCerasi/notes}}
\date{}
